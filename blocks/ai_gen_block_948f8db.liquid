{% doc %}
  @prompt
    a four collection banner which has a headline, subline, and lifts up when the text is hovered over. Each block needs to be fully customisable in terms of what collection can be placed there, what image is displayed, and how the mobile view can look (1 row, 2 row, 3 row etc), the collection boxes need to be stretched to the whole page, all the same size. The text also needs to be displayed on the actual box, as opposed to underneath the container. 
    
    The boxes do not hover either, only the headline and subline lift up when hovered over, i need the collection areas to have headline and subheadline options, as well as font and size customisation too.

{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-collection-banner-{{ ai_gen_id }} {
    width: 100%;
    padding: {{ block.settings.section_padding }}px 0;
  }

  .ai-collection-banner__container-{{ ai_gen_id }} {
    max-width: 100%;
    margin: 0 auto;
    padding: 0 20px;
  }

  .ai-collection-banner__header-{{ ai_gen_id }} {
    text-align: center;
    margin-bottom: {{ block.settings.header_spacing }}px;
    transition: transform 0.3s ease;
  }

  .ai-collection-banner__header-{{ ai_gen_id }}:hover {
    transform: translateY(-{{ block.settings.hover_lift }}px);
  }

  .ai-collection-banner__headline-{{ ai_gen_id }} {
    font-size: {{ block.settings.headline_size }}px;
    color: {{ block.settings.headline_color }};
    margin: 0 0 {{ block.settings.headline_spacing }}px 0;
    font-weight: 600;
  }

  .ai-collection-banner__subline-{{ ai_gen_id }} {
    font-size: {{ block.settings.subline_size }}px;
    color: {{ block.settings.subline_color }};
    margin: 0;
    line-height: 1.5;
  }

  .ai-collection-banner__grid-{{ ai_gen_id }} {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: {{ block.settings.grid_gap }}px;
    height: {{ block.settings.box_height }}px;
  }

  .ai-collection-banner__item-{{ ai_gen_id }} {
    position: relative;
    overflow: hidden;
    border-radius: {{ block.settings.border_radius }}px;
    background-color: {{ block.settings.card_background }};
    height: 100%;
  }

  .ai-collection-banner__link-{{ ai_gen_id }} {
    display: block;
    text-decoration: none;
    color: inherit;
    height: 100%;
    position: relative;
  }

  .ai-collection-banner__image-wrapper-{{ ai_gen_id }} {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
  }

  .ai-collection-banner__image-{{ ai_gen_id }} {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .ai-collection-banner__image-placeholder-{{ ai_gen_id }} {
    width: 100%;
    height: 100%;
    background-color: #f4f4f4;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
  }

  .ai-collection-banner__image-placeholder-{{ ai_gen_id }} svg {
    width: 60%;
    height: 60%;
    opacity: 0.3;
  }

  .ai-collection-banner__empty-state-{{ ai_gen_id }} {
    position: absolute;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 12px;
    color: #666;
    text-align: center;
    pointer-events: none;
  }

  .ai-collection-banner__overlay-{{ ai_gen_id }} {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0) 0%,
      rgba(0, 0, 0, {{ block.settings.overlay_opacity | divided_by: 100.0 }}) 100%
    );
    z-index: 1;
  }

  .ai-collection-banner__content-{{ ai_gen_id }} {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: {{ block.settings.content_padding }}px;
    text-align: {{ block.settings.text_alignment }};
    z-index: 2;
    color: {{ block.settings.overlay_text_color }};
  }

  .ai-collection-banner__card-headline-{{ ai_gen_id }} {
    font-family: {{ block.settings.card_headline_font.family }}, {{ block.settings.card_headline_font.fallback_families }};
    font-weight: {{ block.settings.card_headline_font.weight }};
    font-style: {{ block.settings.card_headline_font.style }};
    font-size: {{ block.settings.card_headline_size }}px;
    color: {{ block.settings.overlay_text_color }};
    margin: 0 0 8px 0;
    line-height: 1.3;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
  }

  .ai-collection-banner__card-subheadline-{{ ai_gen_id }} {
    font-family: {{ block.settings.card_subheadline_font.family }}, {{ block.settings.card_subheadline_font.fallback_families }};
    font-weight: {{ block.settings.card_subheadline_font.weight }};
    font-style: {{ block.settings.card_subheadline_font.style }};
    font-size: {{ block.settings.card_subheadline_size }}px;
    color: {{ block.settings.overlay_text_color }};
    margin: 0;
    line-height: 1.4;
    opacity: 0.9;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
  }

  .ai-collection-banner__empty-collection-{{ ai_gen_id }} {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    color: #999;
    font-style: italic;
    font-size: 14px;
    z-index: 2;
  }

  @media screen and (max-width: 990px) {
    .ai-collection-banner__grid-{{ ai_gen_id }} {
      grid-template-columns: repeat({{ block.settings.columns_tablet }}, 1fr);
    }
  }

  @media screen and (max-width: 749px) {
    .ai-collection-banner__grid-{{ ai_gen_id }} {
      grid-template-columns: repeat({{ block.settings.columns_mobile }}, 1fr);
      height: {{ block.settings.box_height | times: 0.8 }}px;
    }

    .ai-collection-banner__headline-{{ ai_gen_id }} {
      font-size: {{ block.settings.headline_size | times: 0.8 }}px;
    }

    .ai-collection-banner__subline-{{ ai_gen_id }} {
      font-size: {{ block.settings.subline_size | times: 0.9 }}px;
    }

    .ai-collection-banner__card-headline-{{ ai_gen_id }} {
      font-size: {{ block.settings.card_headline_size | times: 0.9 }}px;
    }

    .ai-collection-banner__card-subheadline-{{ ai_gen_id }} {
      font-size: {{ block.settings.card_subheadline_size | times: 0.9 }}px;
    }
  }
{% endstyle %}

<div class="ai-collection-banner-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  <div class="ai-collection-banner__container-{{ ai_gen_id }}">
    {% if block.settings.headline != blank or block.settings.subline != blank %}
      <div class="ai-collection-banner__header-{{ ai_gen_id }}">
        {% if block.settings.headline != blank %}
          <h2 class="ai-collection-banner__headline-{{ ai_gen_id }}">{{ block.settings.headline }}</h2>
        {% endif %}
        {% if block.settings.subline != blank %}
          <p class="ai-collection-banner__subline-{{ ai_gen_id }}">{{ block.settings.subline }}</p>
        {% endif %}
      </div>
    {% endif %}

    <div class="ai-collection-banner__grid-{{ ai_gen_id }}">
      {% for i in (1..4) %}
        {% liquid
          assign collection_key = 'collection_' | append: i
          assign image_key = 'image_' | append: i
          assign headline_key = 'card_headline_' | append: i
          assign subheadline_key = 'card_subheadline_' | append: i
          assign collection = block.settings[collection_key]
          assign custom_image = block.settings[image_key]
          assign card_headline = block.settings[headline_key]
          assign card_subheadline = block.settings[subheadline_key]
        %}
        <div class="ai-collection-banner__item-{{ ai_gen_id }}">
          {% if collection != blank %}
            <a href="{{ collection.url }}" class="ai-collection-banner__link-{{ ai_gen_id }}">
              <div class="ai-collection-banner__image-wrapper-{{ ai_gen_id }}">
                {% if custom_image != blank %}
                  <img
                    src="{{ custom_image | image_url: width: 800 }}"
                    alt="{{ custom_image.alt | escape }}"
                    class="ai-collection-banner__image-{{ ai_gen_id }}"
                    loading="lazy"
                    width="800"
                    height="{{ block.settings.box_height }}"
                  >
                {% elsif collection.featured_image %}
                  <img
                    src="{{ collection.featured_image | image_url: width: 800 }}"
                    alt="{{ collection.featured_image.alt | escape }}"
                    class="ai-collection-banner__image-{{ ai_gen_id }}"
                    loading="lazy"
                    width="800"
                    height="{{ block.settings.box_height }}"
                  >
                {% else %}
                  <div class="ai-collection-banner__image-placeholder-{{ ai_gen_id }}">
                    {{ 'collection-1' | placeholder_svg_tag }}
                  </div>
                {% endif %}
              </div>
              <div class="ai-collection-banner__overlay-{{ ai_gen_id }}"></div>
              <div class="ai-collection-banner__content-{{ ai_gen_id }}">
                {% if card_headline != blank %}
                  <h3 class="ai-collection-banner__card-headline-{{ ai_gen_id }}">{{ card_headline }}</h3>
                {% else %}
                  <h3 class="ai-collection-banner__card-headline-{{ ai_gen_id }}">{{ collection.title }}</h3>
                {% endif %}
                {% if card_subheadline != blank %}
                  <p class="ai-collection-banner__card-subheadline-{{ ai_gen_id }}">{{ card_subheadline }}</p>
                {% elsif collection.description != blank %}
                  <p class="ai-collection-banner__card-subheadline-{{ ai_gen_id }}">{{ collection.description | truncate: 80 }}</p>
                {% endif %}
              </div>
            </a>
          {% else %}
            <div class="ai-collection-banner__link-{{ ai_gen_id }}">
              <div class="ai-collection-banner__image-wrapper-{{ ai_gen_id }}">
                {% if custom_image != blank %}
                  <img
                    src="{{ custom_image | image_url: width: 800 }}"
                    alt="{{ custom_image.alt | escape }}"
                    class="ai-collection-banner__image-{{ ai_gen_id }}"
                    loading="lazy"
                    width="800"
                    height="{{ block.settings.box_height }}"
                  >
                {% else %}
                  <div class="ai-collection-banner__image-placeholder-{{ ai_gen_id }}">
                    {{ 'collection-1' | placeholder_svg_tag }}
                    <div class="ai-collection-banner__empty-state-{{ ai_gen_id }}">
                      Add a collection
                    </div>
                  </div>
                {% endif %}
              </div>
              {% if card_headline != blank or card_subheadline != blank %}
                <div class="ai-collection-banner__overlay-{{ ai_gen_id }}"></div>
                <div class="ai-collection-banner__content-{{ ai_gen_id }}">
                  {% if card_headline != blank %}
                    <h3 class="ai-collection-banner__card-headline-{{ ai_gen_id }}">{{ card_headline }}</h3>
                  {% endif %}
                  {% if card_subheadline != blank %}
                    <p class="ai-collection-banner__card-subheadline-{{ ai_gen_id }}">{{ card_subheadline }}</p>
                  {% endif %}
                </div>
              {% else %}
                <div class="ai-collection-banner__empty-collection-{{ ai_gen_id }}">
                  Select a collection to display
                </div>
              {% endif %}
            </div>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Four collection banner",
  "settings": [
    {
      "type": "header",
      "content": "Header content"
    },
    {
      "type": "text",
      "id": "headline",
      "label": "Headline",
      "default": "Shop Our Collections"
    },
    {
      "type": "textarea",
      "id": "subline",
      "label": "Subline",
      "default": "Discover our curated selection of premium products"
    },
    {
      "type": "range",
      "id": "headline_size",
      "min": 16,
      "max": 60,
      "step": 2,
      "unit": "px",
      "label": "Headline size",
      "default": 32
    },
    {
      "type": "range",
      "id": "subline_size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Subline size",
      "default": 16
    },
    {
      "type": "color",
      "id": "headline_color",
      "label": "Headline color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "subline_color",
      "label": "Subline color",
      "default": "#666666"
    },
    {
      "type": "range",
      "id": "headline_spacing",
      "min": 0,
      "max": 30,
      "step": 2,
      "unit": "px",
      "label": "Headline bottom spacing",
      "default": 10
    },
    {
      "type": "range",
      "id": "header_spacing",
      "min": 0,
      "max": 80,
      "step": 4,
      "unit": "px",
      "label": "Header bottom spacing",
      "default": 40
    },
    {
      "type": "range",
      "id": "hover_lift",
      "min": 0,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Header hover lift effect",
      "default": 8
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "columns_tablet",
      "label": "Columns on tablet",
      "options": [
        {"value": "2", "label": "2"},
        {"value": "3", "label": "3"},
        {"value": "4", "label": "4"}
      ],
      "default": "2"
    },
    {
      "type": "select",
      "id": "columns_mobile",
      "label": "Columns on mobile",
      "options": [
        {"value": "1", "label": "1"},
        {"value": "2", "label": "2"}
      ],
      "default": "1"
    },
    {
      "type": "range",
      "id": "grid_gap",
      "min": 0,
      "max": 40,
      "step": 4,
      "unit": "px",
      "label": "Grid gap",
      "default": 0
    },
    {
      "type": "range",
      "id": "section_padding",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Section padding",
      "default": 40
    },
    {
      "type": "range",
      "id": "box_height",
      "min": 200,
      "max": 600,
      "step": 20,
      "unit": "px",
      "label": "Box height",
      "default": 400
    },
    {
      "type": "header",
      "content": "Box style"
    },
    {
      "type": "range",
      "id": "border_radius",
      "min": 0,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Border radius",
      "default": 0
    },
    {
      "type": "color",
      "id": "card_background",
      "label": "Card background",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "min": 0,
      "max": 80,
      "step": 5,
      "unit": "%",
      "label": "Overlay opacity",
      "default": 40
    },
    {
      "type": "color",
      "id": "overlay_text_color",
      "label": "Overlay text color",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "content_padding",
      "min": 8,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Content padding",
      "default": 20
    },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "Text alignment",
      "options": [
        {"value": "left", "label": "Left"},
        {"value": "center", "label": "Center"},
        {"value": "right", "label": "Right"}
      ],
      "default": "left"
    },
    {
      "type": "header",
      "content": "Card text style"
    },
    {
      "type": "font_picker",
      "id": "card_headline_font",
      "label": "Headline font",
      "default": "helvetica_n4"
    },
    {
      "type": "range",
      "id": "card_headline_size",
      "min": 12,
      "max": 32,
      "step": 1,
      "unit": "px",
      "label": "Headline size",
      "default": 24
    },
    {
      "type": "font_picker",
      "id": "card_subheadline_font",
      "label": "Subheadline font",
      "default": "helvetica_n4"
    },
    {
      "type": "range",
      "id": "card_subheadline_size",
      "min": 10,
      "max": 18,
      "step": 1,
      "unit": "px",
      "label": "Subheadline size",
      "default": 14
    },
    {
      "type": "header",
      "content": "Collection 1"
    },
    {
      "type": "collection",
      "id": "collection_1",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "image_1",
      "label": "Custom image"
    },
    {
      "type": "text",
      "id": "card_headline_1",
      "label": "Custom headline"
    },
    {
      "type": "textarea",
      "id": "card_subheadline_1",
      "label": "Custom subheadline"
    },
    {
      "type": "header",
      "content": "Collection 2"
    },
    {
      "type": "collection",
      "id": "collection_2",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "image_2",
      "label": "Custom image"
    },
    {
      "type": "text",
      "id": "card_headline_2",
      "label": "Custom headline"
    },
    {
      "type": "textarea",
      "id": "card_subheadline_2",
      "label": "Custom subheadline"
    },
    {
      "type": "header",
      "content": "Collection 3"
    },
    {
      "type": "collection",
      "id": "collection_3",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "image_3",
      "label": "Custom image"
    },
    {
      "type": "text",
      "id": "card_headline_3",
      "label": "Custom headline"
    },
    {
      "type": "textarea",
      "id": "card_subheadline_3",
      "label": "Custom subheadline"
    },
    {
      "type": "header",
      "content": "Collection 4"
    },
    {
      "type": "collection",
      "id": "collection_4",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "image_4",
      "label": "Custom image"
    },
    {
      "type": "text",
      "id": "card_headline_4",
      "label": "Custom headline"
    },
    {
      "type": "textarea",
      "id": "card_subheadline_4",
      "label": "Custom subheadline"
    }
  ],
  "presets": [
    {
      "name": "Four collection banner"
    }
  ]
}
{% endschema %}